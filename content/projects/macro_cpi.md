---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2023-09-13"
description: Macrohistory Data Wrangling (CPI) # the title that will show up once someone gets to this page
draft: false
image: macro_cpi.jpg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work

keywords: ""
slug: macro_cpi # slug is the shorthand URL address... no spaces plz
title: Macrohistory Data Wrangling 1
---


![](../../../../../../../../../../../../img/macro_cpi.jpg)<!-- -->



## Macrohistory

This data set comes from the MacroFinance and MacroHistory Lab based in University of Bonn. Specifically, the data set used is the [Jordà-Schularick-Taylor Macrohistory Database](https://www.macrohistory.net/database/ "DATABASE"). This database provides comprehensive coverage of long-run macroeconomic and financial data for 18 countries since 1870.

I was introduced to this database during the "Global Capital Markets and Currencies" course taught by Prof. Helene Rey at London Business School in Autumn 2023.

Importing data to country_data and glimpse


```r
country_data <- read_excel("/Users/rq/Library/CloudStorage/Dropbox/2022-2024 LBS/2023 Term 4 Courses/E306 Global Capital Markets and Currencies/Individual assignment/JSTdatasetR6.xlsx")
glimpse(country_data)
```

```
## Rows: 2,718
## Columns: 59
## $ year                     <dbl> 1870, 1871, 1872, 1873, 1874, 1875, 1876, 187…
## $ country                  <chr> "Australia", "Australia", "Australia", "Austr…
## $ iso                      <chr> "AUS", "AUS", "AUS", "AUS", "AUS", "AUS", "AU…
## $ ifs                      <dbl> 193, 193, 193, 193, 193, 193, 193, 193, 193, …
## $ pop                      <dbl> 1775, 1675, 1722, 1769, 1822, 1874, 1929, 199…
## $ rgdpmad                  <dbl> 3273.239, 3298.507, 3553.426, 3823.629, 3834.…
## $ rgdpbarro                <dbl> 13.83616, 13.93686, 15.04425, 16.21944, 16.26…
## $ rconsbarro               <dbl> 21.44973, 19.93080, 21.08501, 23.25491, 23.45…
## $ gdp                      <dbl> 208.78, 211.56, 227.40, 266.54, 287.58, 300.7…
## $ iy                       <dbl> 0.1092656, 0.1045791, 0.1304380, 0.1249862, 0…
## $ cpi                      <dbl> 2.708333, 2.666667, 2.541667, 2.541667, 2.666…
## $ ca                       <dbl> -6.1475940, 5.2607740, 7.8676360, -11.0478328…
## $ imports                  <dbl> 36, 34, 38, 49, 49, 50, 48, 52, 52, 48, 46, 5…
## $ exports                  <dbl> 37, 46, 53, 50, 54, 52, 51, 51, 50, 44, 59, 5…
## $ narrowm                  <dbl> 23.3, 27.2, 36.2, 38.6, 37.9, 37.5, 38.2, 40.…
## $ money                    <dbl> 54.3, 59.5, 68.5, 73.7, 79.3, 88.5, 95.8, 105…
## $ stir                     <dbl> 4.88, 4.60, 4.60, 4.40, 4.50, 4.60, 4.60, 4.5…
## $ ltrate                   <dbl> 4.911817, 4.844633, 4.737350, 4.671958, 4.653…
## $ hpnom                    <dbl> 0.4922526, 0.4698775, 0.4847942, 0.4698775, 0…
## $ unemp                    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ wage                     <dbl> 0.4481183, 0.4394170, 0.4524690, 0.4916250, 0…
## $ debtgdp                  <dbl> 0.172568, 0.191799, 0.154920, 0.142692, 0.194…
## $ revenue                  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ expenditure              <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ xrusd                    <dbl> 0.3669461, 0.3691464, 0.3692388, 0.3624048, 0…
## $ tloans                   <dbl> 54.792, 53.748, 55.822, 65.380, 71.478, 79.95…
## $ tmort                    <dbl> 1.680, 1.766, 1.470, 1.364, 1.434, 1.564, 1.8…
## $ thh                      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ tbus                     <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ bdebt                    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ lev                      <dbl> 25.01666, 23.98300, 22.44565, 21.00500, 20.97…
## $ ltd                      <dbl> 119.83204, 107.03788, 94.90955, 101.70810, 10…
## $ noncore                  <dbl> 32.92877, 30.21366, 26.86041, 28.64502, 28.29…
## $ crisisJST                <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ crisisJST_old            <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ peg                      <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
## $ peg_strict               <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
## $ peg_type                 <chr> "PEG", "PEG", "PEG", "PEG", "PEG", "PEG", "PE…
## $ peg_base                 <chr> "GBR", "GBR", "GBR", "GBR", "GBR", "GBR", "GB…
## $ JSTtrilemmaIV            <dbl> NA, -0.42, 1.27, 0.59, -1.08, -0.51, -1.01, 0…
## $ eq_tr                    <dbl> -0.004903895, 0.110192969, 0.176749304, 0.151…
## $ housing_tr               <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ bond_tr                  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ bill_rate                <dbl> 0.0488, 0.0460, 0.0460, 0.0440, 0.0450, 0.046…
## $ rent_ipolated            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ housing_capgain_ipolated <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ housing_capgain          <dbl> NA, -0.045456301, 0.031746607, -0.030769771, …
## $ housing_rent_rtn         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ housing_rent_yd          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ eq_capgain               <dbl> -0.07004543, 0.04165363, 0.10894547, 0.083086…
## $ eq_dp                    <dbl> 0.07141703, 0.06546638, 0.06299735, 0.0644841…
## $ eq_capgain_interp        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ eq_tr_interp             <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ eq_dp_interp             <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ bond_rate                <dbl> 0.04911817, 0.04844633, 0.04737350, 0.0467195…
## $ eq_div_rtn               <dbl> 0.06641459, 0.06819329, 0.06986062, 0.0698419…
## $ capital_tr               <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ risky_tr                 <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ safe_tr                  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
```

## Filtering

Four countries and their CPI data over the years (Germany, Portugal, USA, and Switzerland were chosen for this analysis.


```r
# Filter the dataframe
four_countries <- country_data %>% 
  filter(
  country == c("Germany", "Portugal", "USA", "Switzerland")
)
```

```
## Warning: There was 1 warning in `filter()`.
## ℹ In argument: `country == c("Germany", "Portugal", "USA", "Switzerland")`.
## Caused by warning in `country == c("Germany", "Portugal", "USA", "Switzerland")`:
## ! longer object length is not a multiple of shorter object length
```

```r
four_countries %>%
  summarise(country, year, cpi) %>% 
  group_by (country)
```

```
## Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
## dplyr 1.1.0.
## ℹ Please use `reframe()` instead.
## ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
##   always returns an ungrouped data frame and adjust accordingly.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.
```

```
## # A tibble: 151 × 3
## # Groups:   country [4]
##    country      year   cpi
##    <chr>       <dbl> <dbl>
##  1 Switzerland  1872 17.0 
##  2 Switzerland  1876 15.4 
##  3 Switzerland  1880 13.2 
##  4 Switzerland  1884 10.8 
##  5 Switzerland  1888  9.30
##  6 Switzerland  1892 10.6 
##  7 Switzerland  1896  9.92
##  8 Switzerland  1900  9.76
##  9 Switzerland  1904 10.1 
## 10 Switzerland  1908 11.2 
## # ℹ 141 more rows
```

## Plotting the graph

This is to plot the graph of the data, with y-axis as the CPI data, x-axis as years, and Countries were colour coded.

<img src="/projects/macro_cpi_files/figure-html/pressure-1.png" width="672" />
